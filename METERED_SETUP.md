# üéØ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Metered.ca TURN —Å–µ—Ä–≤–µ—Ä–∞ (–ë–ï–°–ü–õ–ê–¢–ù–û!)

Metered.ca –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **20 GB –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ TURN —Ç—Ä–∞—Ñ–∏–∫–∞** –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü.
–≠—Ç–æ —Ä–µ—à–∏—Ç –ø—Ä–æ–±–ª–µ–º—É P2P –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ NAT/firewall!

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- ‚úÖ **20 GB/–º–µ—Å—è—Ü –±–µ—Å–ø–ª–∞—Ç–Ω–æ** - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ** - –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π geo-routing** - –≤—ã–±–∏—Ä–∞–µ—Ç –±–ª–∏–∂–∞–π—à–∏–π —Å–µ—Ä–≤–µ—Ä
- ‚úÖ **–ë–µ–∑ –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –∫–∞—Ä—Ç—ã** - —Ç–æ–ª—å–∫–æ email
- ‚úÖ **–ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - 5 –º–∏–Ω—É—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

---

## üìã –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –º–∏–Ω—É—Ç):

### –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ Metered.ca

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://dashboard.metered.ca/signup?tool=turnserver
2. –í–≤–µ–¥–∏—Ç–µ **email** –∏ **–ø–∞—Ä–æ–ª—å**
3. –ù–∞–∂–º–∏—Ç–µ **"Sign Up"**
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É)

### –®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á

1. –í–æ–π–¥–∏—Ç–µ –≤ dashboard: https://dashboard.metered.ca
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"TURN Servers"** ‚Üí **"API Keys"**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à **API Key** (–≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫: `abc123def456...`)

### –®–∞–≥ 3: –î–æ–±–∞–≤—å—Ç–µ –≤ –ø—Ä–æ–µ–∫—Ç

#### –õ–æ–∫–∞–ª—å–Ω–æ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
   ```bash
   # Windows
   copy .env.example .env.local

   # Linux/Mac
   cp .env.example .env.local
   ```

2. –û—Ç–∫—Ä–æ–π—Ç–µ `.env.local` –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à API –∫–ª—é—á:
   ```
   METERED_API_KEY=–≤–∞—à_api_–∫–ª—é—á_—Å—é–¥–∞
   ```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
   ```bash
   npm run dev
   ```

#### –ù–∞ Render.com (–¥–ª—è production):

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à Web Service –Ω–∞ Render.com
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Environment"** ‚Üí **"Environment Variables"**
3. –ù–∞–∂–º–∏—Ç–µ **"Add Environment Variable"**
4. –î–æ–±–∞–≤—å—Ç–µ:
   - **Key**: `METERED_API_KEY`
   - **Value**: `–≤–∞—à_api_–∫–ª—é—á`
5. –ù–∞–∂–º–∏—Ç–µ **"Save Changes"**
6. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç —Å –Ω–æ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

---

## üéÆ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

### –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –∫–ª—é—á–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω: **"Metered TURN (20GB –±–µ—Å–ø–ª–∞—Ç–Ω–æ)"**
3. –û—Ç–∫—Ä–æ–π—Ç–µ **Debug Panel**
4. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –∑–≤–æ–Ω–∫—É

### –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
üåç Changed ICE servers to: Metered TURN (20GB –±–µ—Å–ø–ª–∞—Ç–Ω–æ)
üîß Creating peer connection...
üßä ICE candidate: relay (udp) ‚Üê TURN –†–ê–ë–û–¢–ê–ï–¢!
‚úÖ TURN relay candidate found!
‚úÖ ICE connected
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

1. –í–æ–π–¥–∏—Ç–µ –≤ https://dashboard.metered.ca
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Usage"**
3. –°–º–æ—Ç—Ä–∏—Ç–µ —Å–∫–æ–ª—å–∫–æ GB –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∏–∑ 20 GB

---

## ‚ö†Ô∏è –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ 20 GB –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω (–æ—Ç $29/–º–µ—Å –∑–∞ 50GB)
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–≤–æ–π TURN —Å–µ—Ä–≤–µ—Ä (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
Oracle Cloud Free Tier + CoTURN:
- –ù–∞–≤—Å–µ–≥–¥–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–æ
- –ë–µ–∑ –ª–∏–º–∏—Ç–æ–≤
- 15 –º–∏–Ω—É—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

---

## üêõ Troubleshooting:

### "‚ö†Ô∏è WARNING: No TURN relay candidates"

**–ü—Ä–∏—á–∏–Ω–∞**: API –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `.env.local` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `METERED_API_KEY` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `npm run dev`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

### "Failed to fetch TURN credentials"

**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ç—å—é –∏–ª–∏ API Metered.ca

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π —Ä–µ–≥–∏–æ–Ω TURN —Å–µ—Ä–≤–µ—Ä–æ–≤
3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: https://callme.metered.live/api/v1/turn/credentials?apiKey=–í–ê–®_–ö–õ–Æ–ß
4. –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å iceServers

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:

- Dashboard: https://dashboard.metered.ca
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://www.metered.ca/docs/turn-server/
- –¢–µ—Å—Ç TURN —Å–µ—Ä–≤–µ—Ä–∞: https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –Ω–∞–¥–µ–∂–Ω—ã–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π TURN —Å–µ—Ä–≤–µ—Ä! üéâ
